CREATE TABLE PERSON_INFO (
Ssn INTEGER NOT NULL,
LName VARCHAR(15) NOT NULL,
FName VARCHAR(15) NOT NULL,
Birth_Date DATE NOT NULL,
PRIMARY KEY (Ssn));


CREATE TABLE PERSON (
P_ID INTEGER NOT NULL,
Ssn INTEGER NOT NULL,
Email VARCHAR(30) NOT NULL,
Phone VARCHAR(12) NOT NULL,
P_Type VARCHAR(10) NOT NULL,
PRIMARY KEY (P_ID),
FOREIGN KEY (Ssn) REFERENCES PERSON_INFO (Ssn));


CREATE TABLE PATIENT (
P_ID INTEGER NOT NULL,
Ssn INTEGER NOT NULL,
Date_Of_Last_X_ray DATE,
HIPAA_Signature VARCHAR(30),
Emergency_Contact INTEGER,
PRIMARY KEY (P_ID),
FOREIGN KEY (P_ID) REFERENCES PERSON (P_ID),
FOREIGN KEY (Ssn) REFERENCES PERSON_INFO (Ssn),
FOREIGN KEY (Emergency_Contact) REFERENCES PERSON (P_ID));


CREATE TABLE EMPLOYEE (
P_ID INTEGER NOT NULL,
Ssn INTEGER NOT NULL,
Salary INTEGER NOT NULL,
Job_Type VARCHAR(10) NOT NULL,
PRIMARY KEY (P_ID),
FOREIGN KEY (P_ID) REFERENCES PERSON (P_ID),
FOREIGN KEY (Ssn) REFERENCES PERSON_INFO (Ssn));




CREATE TABLE ADDRESS (
Address_ID INTEGER NOT NULL,
Street VARCHAR (30) NOT NULL,
City VARCHAR (20) NOT NULL,
State CHAR(2) NOT NULL,
ZIP CHAR(5) NOT NULL,
PRIMARY KEY (Address_ID));


CREATE TABLE PATIENT_HAS_ADDRESS (
Address_ID INTEGER NOT NULL,
P_ID INTEGER NOT NULL,
FOREIGN KEY (Address_ID) REFERENCES ADDRESS (Address_ID),
FOREIGN KEY (P_ID) REFERENCES PERSON (P_ID));


CREATE TABLE MEDICATION(
Medication_ID INTEGER NOT NULL,
Medication_Info VARCHAR(20) NOT NULL,
Date_prescribed DATE NOT NULL,
Dosage VARCHAR(20) NOT NULL,
PRIMARY KEY (Medication_ID));


CREATE TABLE PATIENT_HAS_MEDICATION (
Medication_ID INTEGER NOT NULL,
P_ID INTEGER NOT NULL,
FOREIGN KEY (Medication_ID) REFERENCES MEDICATION (Medication_ID),
FOREIGN KEY (P_ID) REFERENCES PERSON (P_ID));


CREATE TABLE ALLERGY (
Allergy_ID INTEGER NOT NULL,
Allergy_info VARCHAR(20) NOT NULL,
PRIMARY KEY (Allergy_ID));


CREATE TABLE PATIENT_HAS_ALLERGY (
Allergy_ID INTEGER NOT NULL,
P_ID INTEGER NOT NULL,
FOREIGN KEY (Allergy_ID) REFERENCES ALLERGY (Allergy_ID),
FOREIGN KEY (P_ID) REFERENCES PERSON (P_ID));


CREATE TABLE PAYMENT (
Payment_ID INTEGER NOT NULL,
Amount INTEGER NOT NULL,
Pay_Date DATE NOT NULL,
Payment_Type CHAR(10) NOT NULL,
P_ID INTEGER NOT NULL,
PRIMARY KEY (Payment_ID),
FOREIGN KEY (P_ID) REFERENCES PERSON (P_ID));


CREATE TABLE INSURANCE (
Payment_ID INTEGER NOT NULL,
Co_Name VARCHAR(15) NOT NULL,
Co_Phone VARCHAR(12) NOT NULL,
Policy VARCHAR(15) NOT NULL,
FOREIGN KEY (Payment_ID) REFERENCES PAYMENT (Payment_ID));


CREATE TABLE CARD_INFO (
Card_Num CHAR(16) NOT NULL,
Exp_Date DATE NOT NULL,
PIN CHAR(3) NOT NULL,
PRIMARY KEY (Card_Num));


CREATE TABLE CARD (
Payment_ID INTEGER NOT NULL,
Card_Num CHAR(16) NOT NULL,
FOREIGN KEY (Payment_ID) REFERENCES PAYMENT (Payment_ID),
FOREIGN KEY (Card_Num) REFERENCES CARD_INFO (Card_Num));


CREATE TABLE PAPER_CHECK (
Payment_ID INTEGER NOT NULL,
FOREIGN KEY (Payment_ID) REFERENCES PAYMENT (Payment_ID));


CREATE TABLE CASH (
Payment_ID INTEGER NOT NULL,
FOREIGN KEY (Payment_ID) REFERENCES PAYMENT (Payment_ID));


CREATE TABLE BILL (
Bill_ID INTEGER NOT NULL,
Bill_date DATE NOT NULL,
Due_date DATE NOT NULL,
Doctor INTEGER NOT NULL,
PRIMARY KEY (Bill_ID),
FOREIGN KEY (Doctor) REFERENCES PERSON (P_ID));


CREATE TABLE Payment_Apply_Bill (
Payment_ID INTEGER NOT NULL,
Bill_ID INTEGER NOT NULL,
Pay_Date DATE NOT NULL,
FOREIGN KEY (Payment_ID) REFERENCES PAYMENT (Payment_ID),
FOREIGN KEY (Bill_ID) REFERENCES BILL (Bill_ID));


CREATE TABLE APPOINTMENT (
Appt_ID INTEGER NOT NULL,
Appt_Date DATE NOT NULL,
Appt_Type VARCHAR(10) NOT NULL,
P_ID INTEGER NOT NULL,
Bill_ID INTEGER NOT NULL,
PRIMARY KEY (Appt_ID),
FOREIGN KEY (P_ID) REFERENCES PERSON (P_ID),
FOREIGN KEY (Bill_ID) REFERENCES BILL (Bill_ID));


CREATE TABLE DENTAL_PROCEDURE(
Procedure_ID INTEGER NOT NULL,
Procedure_name VARCHAR(50) NOT NULL,
Fee_To_Invoice INTEGER NOT NULL,
Bill_ID INTEGER NOT NULL,
PRIMARY KEY (Procedure_ID),
FOREIGN KEY (Bill_ID) REFERENCES BILL(Bill_ID));


CREATE TABLE APPT_HAS_PROCEDURE (
Appt_ID INTEGER NOT NULL,
Procedure_ID INTEGER NOT NULL,
FOREIGN KEY (Appt_ID) REFERENCES APPOINTMENT (Appt_ID),
FOREIGN KEY (Procedure_ID) REFERENCES DENTAL_PROCEDURE (Procedure_ID));


CREATE TABLE DENTAL_PROVIDER_PERFORM_PROCEDURE (
Procedure_ID INTEGER NOT NULL,
Provider_ID INTEGER NOT NULL,
Per_date DATE NOT NULL,
FOREIGN KEY (Procedure_ID) REFERENCES DENTAL_PROCEDURE (Procedure_ID),
FOREIGN KEY (Provider_ID) REFERENCES PERSON(P_ID));


CREATE TABLE EQUIPMENT (
E_ID INTEGER NOT NULL,
E_name VARCHAR(15) NOT NULL,
PRIMARY KEY (E_ID));


CREATE TABLE PROCEDURE_CONSUME_EQUIPMENT (
Procedure_ID INTEGER NOT NULL,
E_ID INTEGER NOT NULL,
FOREIGN KEY (Procedure_ID) REFERENCES DENTAL_PROCEDURE (Procedure_ID),
FOREIGN KEY (E_ID) REFERENCES EQUIPMENT (E_ID));